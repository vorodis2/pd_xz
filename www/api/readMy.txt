

Настройка АПИ, для работы с сервером alphakp.ru


https://motokulman.github.io/plan2020/www/api/api.rar
Требования.

-На сервере есть переменная, одинакова для всех групп, в случии false все POST запросы доступны без токена, true только с токеном и залогиненым юзером. GET запросы всегда выполняються что с токином что без.

-Как тоестовая группа используеться texture, нужно в случии чего просто создать еще N груп, описать что и как делать, для не сущемтвующей группы XZ в каком нибуть файле, в случии чего показать обьяснить.





Я открываю https://motokulman.github.io/plan2020/www/api/
тыкаю пошагово функуии и кнопку послылаем, в видим требуемый ответ.

1. creat  
1.1 создают обьект в базе данных, 
1.2 под него создаються папка с именем ид alphakp.ru/media/texture/1/  (1 это папка имя от имени ид) 
1.3 В ответе возврощаем сам обьект.
{
    "id": 1,
    //параметры с бд таблицы
    "file": [
        1,
        2
    ]
}

2. delete 
2.1 Уберает из бд инфу
2.2 Убирает из списка всех файлов, вложеные в диеркторию п9
2.3 Убивает директорию и все файлы в ней


3. getid  возврощает всю инфу про обьект

4. set перезаписывает из data все пареметры обьекта
{
	url: 'xz',
	type: 'POST',
	data:{
		json:'Запишу string',
		param1:"43",
		xzParm:........
}

4.1 data.json  "<<послали" пердстовляет из себя стринговую переменную и может быть перезаписанно
4.2 data.json  "<<послали" не стринг, а например инт, ничего не произайдет, ни один параметр не перезапишеться, ответ не верный формат
4.3 data.json  "<<послали" а поля json не существует ничего не произайдет, ни один параметр не перезапишеться, ответ не существейт поля

5. setFile Запишет фаил, передаються ид обьекта
5.1. в массив ид обьекта, в конец списка "file": [ 1, 43, idThisFile]
5.2. сам фаил упадет в alphakp.ru/media/texture/1/nameFile.png
5.3. разумееться запишеться в бд список файлов для этой группы.


6. deleteFile Убет фаил
6.1. Вырежетсья из общего списка файлов
6.2. сам фаил убеться в alphakp.ru/media/texture/1/
6.3. вырежеться из id обьекта группы


7. getList Получение мелкого листа
{
	url: 'xz',
	type: 'GET',
	data:{
		xz:true,
		.....

7.1 В случии если data несуществует, получаем молный список по всем обьектам
7.2 data.xz==true Получем список [{id:123,xz:"sdfsf"},{id:124,xz:"sdf"}]	то есть только те пораметры которые указаны в data


8. saveListJSON Сохронение json 
{
	url: 'xz',
	type: 'POST',
	data:{
		xz:true,
		.....

8.1 В случии если data несуществует, coхроняем фаил на серере alphakp.ru/media/texture/list.json Возращаем количество сохронений, то есть сохронили увеличиили переменную и ее вернули в ответ (нуно для анти кеширования)   
8.2 data.xz==true Получем список [{id:123,xz:"sdfsf"},{id:124,xz:"sdf"}]	то есть только те пораметры которые указаны в data;



9. getListFile Получение листа всех файлов.








